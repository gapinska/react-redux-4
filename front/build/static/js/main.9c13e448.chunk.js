(this["webpackJsonpbook-shop-app"]=this["webpackJsonpbook-shop-app"]||[]).push([[0],{39:function(t,e,c){},45:function(t,e,c){},74:function(t,e,c){"use strict";c.r(e);var n=c(1),a=c(0),r=c.n(a),i=c(7),o=c.n(i),s=(c(39),c(6)),d=(c(45),c(33)),l=c(2),j=c(27),u=c.n(j),b="FETCH_DATA_REQUEST",O="FETCH_DATA_SUCCESS",h="FETCH_DATA_FAILURE",p=function(){return{type:b}},f={loading:!1,data:{},error:""},x=function(){return function(t){t(p),u.a.get("http://localhost:3001/api/book").then((function(e){var c=e.data;t(function(t){return{type:O,payload:t}}(c))})).catch((function(e){var c=e.message;t(function(t){return{type:h,payload:t}}(c))}))}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b:return Object(l.a)(Object(l.a)({},t),{},{loading:!0});case O:return Object(l.a)(Object(l.a)({},t),{},{loading:!1,data:e.payload,error:""});case h:return Object(l.a)(Object(l.a)({},t),{},{loading:!1,data:{},error:e.payload});default:return t}};function v(t){return(t/100).toFixed(2)+" PLN"}var g=c(28),C=c.n(g),y=c(29),T=c.n(y),_=c(30),A=c.n(_),N="ADD_TO_CART",k="REMOVE_FROM_CART",E=Object(s.b)((function(t){return{data:t.data}}),(function(t){return{fetchData:function(){return t(x())}}}))((function(t){var e=t.data,c=t.fetchData,r=Object(a.useState)(null),i=Object(d.a)(r,2),o=i[0],j=i[1];Object(s.c)();Object(a.useEffect)((function(){c()}),[]);var u=function(){j(null)};return e.loading?Object(n.jsx)("h2",{children:"Loading"}):e.error?Object(n.jsx)("h2",{children:e.error}):Object(n.jsxs)("div",{children:[Object(n.jsx)(C.a,{bottom:!0,cascade:!0,children:Object(n.jsx)("ul",{className:"books",children:e.data.data&&e.data.data.map((function(t){return Object(n.jsx)("li",{children:Object(n.jsxs)("div",{className:"book",children:[Object(n.jsxs)("a",{href:"#"+t.id,onClick:function(){return function(t){j(t)}(t)},children:[Object(n.jsx)("img",{src:t.cover_url,alt:t.title}),Object(n.jsx)("p",{children:t.title})]}),Object(n.jsxs)("div",{className:"book-price",children:[Object(n.jsx)("div",{children:v(t.price)}),Object(n.jsx)("button",{onClick:function(){return e=t,function(t,c){var n=c().cart.cartItems;n.forEach((function(t){var c=!1;t._id===e._id&&(c=!0,t.count++),c||n.push(Object(l.a)(Object(l.a)({},e),{},{count:1}))})),t({type:N,payload:{cartItems:n}}),localStorage.setItem("cartItems",JSON.stringify(n))};var e},children:"Add to Cart"})]})]})},t.id)}))})}),o&&Object(n.jsx)(T.a,{isOpen:!0,onRequestClose:u,children:Object(n.jsxs)(A.a,{children:[Object(n.jsx)("button",{className:"close-modal",onClick:u,children:"x"}),Object(n.jsxs)("div",{className:"product-details",children:[Object(n.jsx)("img",{src:o.cover_url,alt:o.title}),Object(n.jsxs)("div",{className:"product-details-description",children:[Object(n.jsx)("p",{children:Object(n.jsx)("strong",{children:o.title})}),Object(n.jsxs)("p",{children:["Number of pages: ",o.pages]}),Object(n.jsxs)("div",{className:"product-price",children:[Object(n.jsxs)("div",{children:["Price: ",v(o.price)]}),Object(n.jsx)("button",{className:"button primary",onClick:function(){u()},children:"Add To Cart"})]})]})]})]})})]})})),I=c(4),S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:JSON.parse(localStorage.getItem("cartItems")||"[]")},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N:case k:return Object(l.a)(Object(l.a)({},t),{},{cartItems:e.payload.cartItems});default:return t}},F=Object(I.combineReducers)({data:m,cart:S}),D=c(31),R=c(32),w=Object(I.createStore)(F,Object(R.composeWithDevTools)(Object(I.applyMiddleware)(D.a)));var L=function(){return Object(n.jsx)(s.a,{store:w,children:Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(E,{})})})},J=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,75)).then((function(e){var c=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;c(t),n(t),a(t),r(t),i(t)}))};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(L,{})}),document.getElementById("root")),J()}},[[74,1,2]]]);
//# sourceMappingURL=main.9c13e448.chunk.js.map
{"version":3,"sources":["redux/server/dataTypes.js","redux/server/data.js","util.js","redux/cart/cart.js","components/Books.js","redux/cart/cartReducer.js","redux/rootReducer.js","redux/store.js","App.js","reportWebVitals.js","index.js"],"names":["FETCH_DATA_REQUEST","FETCH_DATA_SUCCESS","FETCH_DATA_FAILURE","fetchDataRequest","type","initialState","loading","data","error","fetchData","dispatch","axios","get","then","response","payload","fetchDataSuccess","catch","errorMsg","message","fetchDataFailure","dataReducer","state","action","formatCurrency","num","toFixed","ADD_TO_CART","REMOVE_FROM_CART","connect","useState","book","setBook","useDispatch","useEffect","closeModal","bottom","cascade","className","map","href","id","onClick","openModal","src","cover_url","alt","title","price","product","getState","cartItems","cart","forEach","item","alreadyInCart","_id","count","push","localStorage","setItem","JSON","stringify","isOpen","onRequestClose","pages","cartReducer","parse","getItem","rootReducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9c13e448.chunk.js","sourcesContent":["export const FETCH_DATA_REQUEST = 'FETCH_DATA_REQUEST'\nexport const FETCH_DATA_SUCCESS = 'FETCH_DATA_SUCCESS'\nexport const FETCH_DATA_FAILURE = 'FETCH_DATA_FAILURE'\n","import axios from 'axios'\nimport { FETCH_DATA_FAILURE, FETCH_DATA_REQUEST, FETCH_DATA_SUCCESS } from './dataTypes'\n\nexport const fetchDataRequest = () => {\n\treturn {\n\t\ttype: FETCH_DATA_REQUEST\n\t}\n}\n\nexport const fetchDataSuccess = (data) => {\n\treturn {\n\t\ttype: FETCH_DATA_SUCCESS,\n\t\tpayload: data\n\t}\n}\n\nexport const fetchDataFailure = (error) => {\n\treturn {\n\t\ttype: FETCH_DATA_FAILURE,\n\t\tpayload: error\n\t}\n}\n\nconst initialState = {\n\tloading: false,\n\tdata: {},\n\terror: ''\n}\n\nconst dataReducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase FETCH_DATA_REQUEST:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloading: true\n\t\t\t}\n\t\tcase FETCH_DATA_SUCCESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloading: false,\n\t\t\t\tdata: action.payload,\n\t\t\t\terror: ''\n\t\t\t}\n\t\tcase FETCH_DATA_FAILURE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloading: false,\n\t\t\t\tdata: {},\n\t\t\t\terror: action.payload\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const fetchData = () => {\n\treturn (dispatch) => {\n\t\tdispatch(fetchDataRequest)\n\t\taxios\n\t\t\t.get('http://localhost:3001/api/book')\n\t\t\t.then((response) => {\n\t\t\t\tconst data = response.data\n\t\t\t\tdispatch(fetchDataSuccess(data))\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconst errorMsg = error.message\n\t\t\t\tdispatch(fetchDataFailure(errorMsg))\n\t\t\t})\n\t}\n}\n\nexport default dataReducer\n","export default function formatCurrency(num) {\n\treturn (num / 100).toFixed(2) + ' PLN'\n}\n","export const ADD_TO_CART = 'ADD_TO_CART'\nexport const REMOVE_FROM_CART = 'REMOVE_FROM_CART'\n\nexport const addToCart = (product) => (dispatch, getState) => {\n\tconst cartItems = getState().cart.cartItems\n\tcartItems.forEach((item) => {\n\t\tlet alreadyInCart = false\n\t\tif (item._id === product._id) {\n\t\t\talreadyInCart = true\n\t\t\titem.count++\n\t\t}\n\n\t\tif (!alreadyInCart) {\n\t\t\tcartItems.push({ ...product, count: 1 })\n\t\t}\n\t})\n\tdispatch({\n\t\ttype: ADD_TO_CART,\n\t\tpayload: {\n\t\t\tcartItems\n\t\t}\n\t})\n\tlocalStorage.setItem('cartItems', JSON.stringify(cartItems))\n}\n\nexport const removeFromCart = (product) => (dispatch, getState) => {\n\tconst cartItems = getState().cart.cartItems.slice().filter((item) => item._id !== product._id)\n\tdispatch({\n\t\ttype: REMOVE_FROM_CART,\n\t\tpayload: {\n\t\t\tcartItems\n\t\t}\n\t})\n\tlocalStorage.setItem('cartItems', JSON.stringify(cartItems))\n}\n","import { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { fetchData } from '../redux/server/data'\nimport formatCurrency from '../util'\nimport Fade from 'react-reveal/Fade'\nimport Modal from 'react-modal'\nimport Zoom from 'react-reveal/Zoom'\nimport { addToCart } from '../redux/cart/cart'\nimport { useSelector, useDispatch } from 'react-redux'\n\nconst Books = ({ data, fetchData }) => {\n\tconst [ book, setBook ] = useState(null)\n\tconst dispatch = useDispatch()\n\n\tuseEffect(() => {\n\t\tfetchData()\n\t}, [])\n\tconst openModal = (book) => {\n\t\tsetBook(book)\n\t}\n\tconst closeModal = () => {\n\t\tsetBook(null)\n\t}\n\treturn data.loading ? (\n\t\t<h2>Loading</h2>\n\t) : data.error ? (\n\t\t<h2>{data.error}</h2>\n\t) : (\n\t\t<div>\n\t\t\t<Fade bottom cascade>\n\t\t\t\t<ul className=\"books\">\n\t\t\t\t\t{data.data.data &&\n\t\t\t\t\t\tdata.data.data.map((book) => (\n\t\t\t\t\t\t\t<li key={book.id}>\n\t\t\t\t\t\t\t\t<div className=\"book\">\n\t\t\t\t\t\t\t\t\t<a href={'#' + book.id} onClick={() => openModal(book)}>\n\t\t\t\t\t\t\t\t\t\t<img src={book.cover_url} alt={book.title} />\n\t\t\t\t\t\t\t\t\t\t<p>{book.title}</p>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div className=\"book-price\">\n\t\t\t\t\t\t\t\t\t\t<div>{formatCurrency(book.price)}</div>\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => addToCart(book)}>Add to Cart</button>\n\t\t\t\t\t\t\t\t\t\t{/* <button onClick={() => this.props.addToCart(product)} className=\"button primary\">\n\t\t\t\t\t\t\t\t\tAdd To Cart\n\t\t\t\t\t\t\t\t</button> */}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t{/* <div>{data.data.data && console.log(data.data.data)}</div> */}\n\t\t\t\t</ul>\n\t\t\t</Fade>\n\t\t\t{book && (\n\t\t\t\t<Modal isOpen={true} onRequestClose={closeModal}>\n\t\t\t\t\t<Zoom>\n\t\t\t\t\t\t<button className=\"close-modal\" onClick={closeModal}>\n\t\t\t\t\t\t\tx\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div className=\"product-details\">\n\t\t\t\t\t\t\t<img src={book.cover_url} alt={book.title} />\n\t\t\t\t\t\t\t<div className=\"product-details-description\">\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<strong>{book.title}</strong>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>Number of pages: {book.pages}</p>\n\t\t\t\t\t\t\t\t<div className=\"product-price\">\n\t\t\t\t\t\t\t\t\t<div>Price: {formatCurrency(book.price)}</div>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"button primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t// this.props.addToCart(product)\n\t\t\t\t\t\t\t\t\t\t\tcloseModal()\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tAdd To Cart\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Zoom>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tdata: state.data\n\t}\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tfetchData: () => dispatch(fetchData())\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Books)\n","import { ADD_TO_CART, REMOVE_FROM_CART } from './cart'\n\nconst cartReducer = (state = { cartItems: JSON.parse(localStorage.getItem('cartItems') || '[]') }, action) => {\n\tswitch (action.type) {\n\t\tcase ADD_TO_CART:\n\t\t\treturn { ...state, cartItems: action.payload.cartItems }\n\t\tcase REMOVE_FROM_CART:\n\t\t\treturn { ...state, cartItems: action.payload.cartItems }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default cartReducer\n","import { combineReducers } from 'redux'\nimport dataReducer from './server/data'\nimport cartReducer from './cart/cartReducer'\n\nconst rootReducer = combineReducers({\n\tdata: dataReducer,\n\tcart: cartReducer\n})\n\nexport default rootReducer\n","import { createStore, applyMiddleware } from 'redux'\nimport rootReducer from './rootReducer'\nimport thunk from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\n\nconst store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)))\n\nexport default store\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport './App.css'\nimport Books from './components/Books'\nimport store from './redux/store'\n\nfunction App() {\n\treturn (\n\t\t<Provider store={store}>\n\t\t\t<div className=\"App\">\n\t\t\t\t<Books />\n\t\t\t</div>\n\t\t</Provider>\n\t)\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
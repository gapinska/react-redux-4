{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/mgapinska/Dokumenty/books-shop-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{connect}from'react-redux';import{fetchData as _fetchData}from'../redux/server/data';import formatCurrency from'../util';import Fade from'react-reveal/Fade';import Modal from'react-modal';import Zoom from'react-reveal/Zoom';import{addToCart}from'../redux/cart/cart';import{useSelector,useDispatch}from'react-redux';var Books=function Books(_ref){var data=_ref.data,fetchData=_ref.fetchData;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),book=_useState2[0],setBook=_useState2[1];var dispatch=useDispatch();useEffect(function(){fetchData();},[]);var openModal=function openModal(book){setBook(book);};var closeModal=function closeModal(){setBook(null);};return data.loading?/*#__PURE__*/_jsx(\"h2\",{children:\"Loading\"}):data.error?/*#__PURE__*/_jsx(\"h2\",{children:data.error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Fade,{bottom:true,cascade:true,children:/*#__PURE__*/_jsx(\"ul\",{className:\"books\",children:data.data.data&&data.data.data.map(function(book){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"book\",children:[/*#__PURE__*/_jsxs(\"a\",{href:'#'+book.id,onClick:function onClick(){return openModal(book);},children:[/*#__PURE__*/_jsx(\"img\",{src:book.cover_url,alt:book.title}),/*#__PURE__*/_jsx(\"p\",{children:book.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-price\",children:[/*#__PURE__*/_jsx(\"div\",{children:formatCurrency(book.price)}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return addToCart(book);},children:\"Add to Cart\"})]})]})},book.id);})})}),book&&/*#__PURE__*/_jsx(Modal,{isOpen:true,onRequestClose:closeModal,children:/*#__PURE__*/_jsxs(Zoom,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-modal\",onClick:closeModal,children:\"x\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-details\",children:[/*#__PURE__*/_jsx(\"img\",{src:book.cover_url,alt:book.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-details-description\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:book.title})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Number of pages: \",book.pages]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-price\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Price: \",formatCurrency(book.price)]}),/*#__PURE__*/_jsx(\"button\",{className:\"button primary\",onClick:function onClick(){// this.props.addToCart(product)\ncloseModal();},children:\"Add To Cart\"})]})]})]})]})})]});};var mapStateToProps=function mapStateToProps(state){return{data:state.data};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{fetchData:function fetchData(){return dispatch(_fetchData());}};};export default connect(mapStateToProps,mapDispatchToProps)(Books);","map":{"version":3,"sources":["/home/mgapinska/Dokumenty/books-shop-app/src/components/Books.js"],"names":["useEffect","useState","connect","fetchData","formatCurrency","Fade","Modal","Zoom","addToCart","useSelector","useDispatch","Books","data","book","setBook","dispatch","openModal","closeModal","loading","error","map","id","cover_url","title","price","pages","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { fetchData } from '../redux/server/data'\nimport formatCurrency from '../util'\nimport Fade from 'react-reveal/Fade'\nimport Modal from 'react-modal'\nimport Zoom from 'react-reveal/Zoom'\nimport { addToCart } from '../redux/cart/cart'\nimport { useSelector, useDispatch } from 'react-redux'\n\nconst Books = ({ data, fetchData }) => {\n\tconst [ book, setBook ] = useState(null)\n\tconst dispatch = useDispatch()\n\n\tuseEffect(() => {\n\t\tfetchData()\n\t}, [])\n\tconst openModal = (book) => {\n\t\tsetBook(book)\n\t}\n\tconst closeModal = () => {\n\t\tsetBook(null)\n\t}\n\treturn data.loading ? (\n\t\t<h2>Loading</h2>\n\t) : data.error ? (\n\t\t<h2>{data.error}</h2>\n\t) : (\n\t\t<div>\n\t\t\t<Fade bottom cascade>\n\t\t\t\t<ul className=\"books\">\n\t\t\t\t\t{data.data.data &&\n\t\t\t\t\t\tdata.data.data.map((book) => (\n\t\t\t\t\t\t\t<li key={book.id}>\n\t\t\t\t\t\t\t\t<div className=\"book\">\n\t\t\t\t\t\t\t\t\t<a href={'#' + book.id} onClick={() => openModal(book)}>\n\t\t\t\t\t\t\t\t\t\t<img src={book.cover_url} alt={book.title} />\n\t\t\t\t\t\t\t\t\t\t<p>{book.title}</p>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div className=\"book-price\">\n\t\t\t\t\t\t\t\t\t\t<div>{formatCurrency(book.price)}</div>\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => addToCart(book)}>Add to Cart</button>\n\t\t\t\t\t\t\t\t\t\t{/* <button onClick={() => this.props.addToCart(product)} className=\"button primary\">\n\t\t\t\t\t\t\t\t\tAdd To Cart\n\t\t\t\t\t\t\t\t</button> */}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t{/* <div>{data.data.data && console.log(data.data.data)}</div> */}\n\t\t\t\t</ul>\n\t\t\t</Fade>\n\t\t\t{book && (\n\t\t\t\t<Modal isOpen={true} onRequestClose={closeModal}>\n\t\t\t\t\t<Zoom>\n\t\t\t\t\t\t<button className=\"close-modal\" onClick={closeModal}>\n\t\t\t\t\t\t\tx\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div className=\"product-details\">\n\t\t\t\t\t\t\t<img src={book.cover_url} alt={book.title} />\n\t\t\t\t\t\t\t<div className=\"product-details-description\">\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<strong>{book.title}</strong>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>Number of pages: {book.pages}</p>\n\t\t\t\t\t\t\t\t<div className=\"product-price\">\n\t\t\t\t\t\t\t\t\t<div>Price: {formatCurrency(book.price)}</div>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"button primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t// this.props.addToCart(product)\n\t\t\t\t\t\t\t\t\t\t\tcloseModal()\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tAdd To Cart\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Zoom>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tdata: state.data\n\t}\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tfetchData: () => dispatch(fetchData())\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Books)\n"]},"metadata":{},"sourceType":"module"}